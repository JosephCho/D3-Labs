if(d3.ext===null||typeof d3.ext!=="object"){d3.ext={}}this.d3.ext.base=function(){"use strict";var my={};var config={};my.accessor=function(accessor,value){if(!arguments.length){return config}if(value!==undefined){config[accessor]=value}my[accessor]=function(value){if(!arguments.length){return config[accessor]}config[accessor]=value;return my};return my};my.setupSVG=function(el){var svg=d3.select(el);svg.selectAll("svg").data([1]).enter().append("svg").attr("width",my.width()).attr("height",my.height());return svg.select("svg")};my.setupChart=function(svg){svg.selectAll(".chart-box").data([1]).enter().append("g").attr("class","chart-box").attr("transform","translate("+my.margin().left+","+my.margin().top+")");return svg.select(".chart-box")};my.chartWidth=function(width,margin){return width-margin.left-margin.right};my.chartHeight=function(height,margin){return height-margin.top-margin.bottom};my.accessor("width",900).accessor("height",600).accessor("margin",{top:10,right:10,bottom:10,left:10});my.w=function(){return my.chartWidth(my.width(),my.margin())};my.h=function(){return my.chartHeight(my.height(),my.margin())};return my};if(d3.charts===null||typeof d3.charts!=="object"){d3.charts={}}d3.charts.viz=function(){var my=d3.ext.base();my.accessor("example",true);var svg=void 0,chart=void 0;var x=d3.scaleLinear(),y=d3.scaleBand();my.draw=function(selection){selection.each(function(data){svg=my.setupSVG(this);chart=my.setupChart(svg);my.chart(data)})};my.chart=function(data){var chartData=my.profit(data);x.domain([0,my.profitMax(chartData)]).range([0,my.w()]);y.domain(my.categories(chartData)).range([0,my.h()]).padding(.2).round(true);var boxes=chart.selectAll(".box").data(chartData);boxes.enter().append("rect").attr("class","box").attr("fill","steelblue");boxes.transition().duration(1e3).attr("x",0).attr("y",function(d){return y(d.category)}).attr("width",function(d){return x(d.profit)}).attr("height",y.bandwidth());boxes.exit().remove()};my.profit=function(data){return data.map(function(d){d.profit=parseFloat(d.sales)-parseFloat(d.cost);return d})};my.categories=function(data){return data.map(function(d){return d.category})};my.profitMax=function(data){return d3.max(data,function(d){return d.profit})};return my};
